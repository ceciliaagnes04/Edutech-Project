# -*- coding: utf-8 -*-
"""prediction

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1WEIvhaXy3DYT2fk8LVPTrIACmZ-FFyJl

# PREDIKSI ATTRITION UNTUK DATA BARU (SCRIPT)

## Import library
"""

import pandas as pd
import pickle

"""## Load model, scaler, encoder, dan info kolom"""

with open('model.pkl', 'rb') as f:
    model = pickle.load(f)
with open('scaler.pkl', 'rb') as f:
    scaler = pickle.load(f)
with open('encoders.pkl', 'rb') as f:
    encoders = pickle.load(f)
with open('num_cols.pkl', 'rb') as f:
    num_cols = pickle.load(f)
with open('cat_cols.pkl', 'rb') as f:
    cat_cols = pickle.load(f)

"""## Contoh data baru (ISI SESUAI employee_data.csv, tanpa kolom target)"""

data = {
    'Age': [23],
    'BusinessTravel': ['Travel_Frequently'],
    'DailyRate': [350],
    'Department': ['Sales'],
    'DistanceFromHome': [20],
    'Education': [1],
    'EducationField': ['Marketing'],
    'EnvironmentSatisfaction': [1],
    'Gender': ['Female'],
    'HourlyRate': [35],
    'JobInvolvement': [1],
    'JobLevel': [1],
    'JobRole': ['Sales Representative'],
    'JobSatisfaction': [1],
    'MaritalStatus': ['Single'],
    'MonthlyIncome': [2000],
    'MonthlyRate': [4000],
    'NumCompaniesWorked': [5],
    'OverTime': ['Yes'],
    'PercentSalaryHike': [11],
    'PerformanceRating': [3],  # hanya 3 atau 4!
    'RelationshipSatisfaction': [1],
    'StockOptionLevel': [0],
    'TotalWorkingYears': [1],
    'TrainingTimesLastYear': [0],
    'WorkLifeBalance': [1],
    'YearsAtCompany': [1],
    'YearsInCurrentRole': [0],
    'YearsSinceLastPromotion': [0],
    'YearsWithCurrManager': [0]
}

df_new = pd.DataFrame(data)

"""## Encoding kategorikal"""

for col in cat_cols:
    df_new[col] = encoders[col].transform(df_new[col])

"""## Scaling numerik"""

df_new[num_cols] = scaler.transform(df_new[num_cols])

"""## Prediksi"""

pred = model.predict(df_new)
print('Prediksi Attrition:', pred[0])  # 0 = tidak keluar, 1 = keluar